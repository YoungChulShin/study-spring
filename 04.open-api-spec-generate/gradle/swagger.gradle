// @see https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-gradle-plugin
openApiGenerate {
    generatorName = "spring"
    inputSpec = "${rootDir}/src/main/resources/swagger/openapi.yaml".toString()
    outputDir = "${buildDir}/openapi".toString()
    apiPackage = "study.backend.java.httprequestresponse.rest"
    modelPackage = "study.backend.java.httprequestresponse.rest"
    modelNameSuffix = "Dto"
    // @see https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/spring.md
    configOptions = [
            delegatePattern        : 'true',
            hideGenerationTimestamp: 'true',
            useSpringBoot3         : 'true',
            useJakartaEe           : 'true'
    ]
    validateSpec = true
}

sourceSets {
    main.java.srcDir layout.buildDirectory.file('openapi/src/main/java')
}

compileJava.dependsOn tasks.named("openApiGenerate")